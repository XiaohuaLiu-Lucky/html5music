# QQ音乐播放器

> 该项目是一个基于zepto的一个移动端的html5的项目,功能比较完整。可以播放，暂停，上一曲，下一曲, 一首歌结束能自动切换到下一首，有播放列表，可以切换歌曲，有歌词滚动，有歌曲播放的进度条，能拖动进度条改变进度。

> 首先通过$.ajax()向我的easy mock里面获取数据(在easy mock里提前把数据写好了)，渲染第一首歌的歌曲信息。用立即执行函数封闭作用域，拆分功能模块：
1. 音乐模块控制歌曲的播放，暂停，跳转播放，切换上一首下一首的换源。
2. 控制管理器模块：管理我们歌曲的index索引，因为我们点击上一曲，下一曲，或者直接点击任何一首歌曲切换，或者是自动切换都需要知道歌曲才词库里的索引，好正确的渲染对应的歌曲信息，同时为了避免外面随意的更改我们的index所以，所以封装成一个模块，然后我们给出的接口使用。
3. 进度条模块：歌曲播放进度条会走，左边的当前时间会超前走，右边的当前时间也会超前走。用百分比去设置进度条，重新渲染进度条，当前时间也是通过百分比算出来的。，实时地区监控当前播放的这首歌曲是这首歌的百分之几，这里用requestAnimationFrame对动画进行了优化，没有setInterval的卡顿
4. 歌曲模块：当前多少秒应该显示什么歌词，获取当前播放的时间，然后对应的文字移动
5. 渲染模块：因为不管是上一首还是下一首，点击列表切换都需要去渲染歌曲的信息，渲染歌曲的图片，渲染歌曲是否喜欢，渲染页面的高斯模糊的背景图片，渲染当前这首歌的音乐资源，会有很多重复的地方，故把它摘出来，封装成一个渲染模块。
6. 播放列表模块：主要是播放列表模块的封装，绑定事件，标记当前歌曲，渲染列表。
7. 主模块：主要的功能，逻辑代码，获取歌曲的数据，绑定一些上一曲，下一曲，拖动进度条的一些事件，渲染页面等，


> 该项目是基于gulp-cli@3.9.1进行开发的，用gulp构建工具来进行代码的压缩和转移，监听文件变化，开启服务器，掌握gulp的4个API:gulp.task(),gulp.src(),gulp.dest(),gulp.watch()和常用的开启服务器，压缩代码，css转less,自动补齐前缀等常用插件，对gulp任务运行器有了更深入地理解，gulp一个功能就是任务，一个任务就是一个函数，以编码的方式去定义任务，更流程化一些，所以叫做任务运行器。

## 技术栈

- gulp + less + zepto + html5 + flex

### 项目运行

1. git clone git@github.com:XiaohuaLiu-Lucky/html5music.git
2. cnpm intall 
3. gulp
4. 在本地 http://localhost:8081/build/html/ 这个地址下可以看到项目效果


==需要提前把gulp安装好==